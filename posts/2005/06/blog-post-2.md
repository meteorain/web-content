---
title: "蓝色魔法漏洞"
pubDate: 2005-06-10T19:39:00.000Z
categories: 
  - "live"
---

蓝色魔法论坛是一个用PHP编写的论坛，在国内被普遍采用。由于它的用户注册模快中的一些代码缺陷，可以导致恶意攻击者将普通用户提升为管理员。先让我们看看一个入侵范例吧。

现在有这个网站http://zhou.hostlike.com/bbs/bmb/index.php，从该论坛最下方的特征码我们也可以在Google上找到有同样问题的论坛。如“Powered by BMForum Plus! 2.7”。

我们测试一下这个网站，方法很简单，这个论坛的主要缺陷在于过滤不严，通过伪造“|”使程序在读用户等级时将之判断为管理员。单击“注册”按钮，进入注册页面，在填写邮箱地址时，输入“ test@test.com|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0| ”，通过认证后，这个刚注册的新用户就变成了管理员。面这个步骤又是如此简单，加上管理员的权限又大，其危害可想而知。

进入“管理中心”，就可以管理员面了，在这里，恶意的用户可以做很多事情，比如在发表贴子的地方上传一个ASP木马附件(如“海洋顶端”)，然后在后台管理页面找到这个木马的网址并打开它，你就可能用这个WebShell控制这个网站了。当然，如果你很强，甚至可以得到整个服务器的控制权:)
