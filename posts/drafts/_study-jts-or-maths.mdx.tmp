---
id: drj
title: "JTSä¸­çº¿æ®µäº¤ç‚¹ä¸ç‚¹åˆ°ç›´çº¿è·ç¦»çš„è®¡ç®—æ–¹æ³•"
date: "2020-05-03T04:03:02.000Z"
draft: true
tags: ["å¹³é¢å‡ ä½•"]
categories: ["ç¬”è®°"]
---

ç¬¬ä¸€æ¬¡é¢è¯•ï¼Œå‡†å¤‡çš„æ²¡å¤ªå……åˆ†ã€‚é™¤äº†è¢«é—®åŠæŠ€æœ¯æ–¹é¢çš„åŸºç¡€é—®é¢˜å¤–ï¼Œè¿˜æœ‰ä¸€äº›å¹³é¢å‡ ä½•çš„é—®é¢˜ï¼Œå›ç­”çš„éå¸¸æ‹‰å®ã€‚ä¸œè¡¥è¥¿è¡¥ï¼Œæ„Ÿè§‰è¶Šè¡¥æ¼æ´ä¹Ÿè¶Šå¤§äº† ğŸ™„ï¼Œä¸ºäº†ç†Ÿæ‚‰å¹³é¢å‡ ä½•çš„ä¸œè¥¿ï¼Œå†³å®šçœ‹ä¸€çœ‹ jts çš„ä»£ç ï¼Œç®—æ˜¯ä¸€ä¸ªçŸ¥è¯†ç‚¹çš„listï¼Œå…¶æ¬¡ä¹Ÿèƒ½äº†è§£ä¸€äº›ç›¸å…³é—®é¢˜çš„è§£å†³æ–¹æ³•ã€‚

è¯´å®è¯ï¼Œè‡ªä»ç ”è€ƒç»“æŸä¹‹åï¼Œæ•°å­¦æŠ€æœ¯å·²ç»è¿›å…¥äº†ä¸€è½½æœ‰ä½™çš„ä¼‘çœ æœŸï¼Œå¯¹ä¸‰è§’å‡½æ•°è¯¸çŸ¥è¯†ä¹Ÿå·²ç»ä¸å¤ªç›¸è¯†äº†ï¼Œé‡æ‹¾è¿™äº›ï¼Œèµ·æ­¥å¯è°“ç›¸å½“ç—›è‹¦ã€‚é˜…è¯»ä»æŠ˜çº¿é—´çš„äº¤ç‚¹å¼€å§‹ã€‚

## æ±‚ä¸¤çº¿æ®µäº¤ç‚¹

> org.locationtech.jts.algorithm.Intersection

å¯¹ä»»æ„ç›¸äº¤æŠ˜çº¿æ®µï¼ŒAB ï¼ŒCD ï¼Œæ±‚å…¶äº¤ç‚¹Tï¼š

![å…¶äº¤ç‚¹](https://static.yuhang.ch/blog/study-jts-or-maths_1.png)

### æ‰¾äº¤ç‚¹æ‰€åœ¨çš„çŸ©å½¢èŒƒå›´

å¯¹äºç›´çº¿

$$l_1=ABï¼Œl_2=CD$$

æ‰¾åˆ°å…¶å¯¹åº”çš„çŸ©å½¢èŒƒå›´

$$l_1\in D_1,D_2\in l_2$$

å¾—åˆ°

$$D = D_1\bigcap D_2$$

è¿›ä¸€æ­¥å¾—åˆ°Dçš„ä¸­å¿ƒç‚¹Mï¼Œå°†Mä½œä¸ºåŸç‚¹å»ºç«‹åæ ‡ç³»ï¼Œå¹³ç§»å„ç‚¹åå¾—åˆ°

$$A_m,B_m,C_m,D_m$$

### æ ¹æ®é½æ¬¡åæ ‡æ±‚äº¤ç‚¹åæ ‡

é«˜ä¸­çš„å¹³é¢å‡ ä½•ä¸­ï¼Œéƒ½åœ¨ä½¿ç”¨æ–¹ç¨‹ç»„çš„æ–¹æ³•æ±‚è§£ï¼Œç›¸æ¯”ä¹‹ä¸‹ï¼Œé½æ¬¡åæ ‡çš„å½¢å¼æ›´æ–¹ä¾¿ã€ç®€æ´ã€‚

å¯¹é½æ¬¡åæ ‡æœ‰ï¼š

ä¸¤ç‚¹ç¡®å®šçš„ç›´çº¿ä¸º

$$l=P_1\times P_2$$

ä¸¤ç›´çº¿äº¤ç‚¹ä¸º

$$T=l_1\times l_2$$

å°†åæ ‡è½¬æ¢ä¸ºé½æ¬¡åæ ‡æœ‰ï¼š

$$ A_m = (x_a,y_a,w_a)$$

$$ B_m = (x_b,y_b,w_b)$$

ä»¤ $$ w_a = w_b = 1$$

åˆ™$$ l_1 = A_m\times B_m=(y_a-y_b,-(x_a-x_b),x_a\times y_b-x_b\times y_a)$$

åŒç†å¾—ï¼š

$$ l_2 = C_m\times D_m=(y_c-y_d,-(x_c-x_d),x_c\times y_d-x_d\times y_c)$$

æœ‰é½æ¬¡åæ ‡

$$T=(x,y,w)=l_1\times l_2$$

æœ€ç»ˆæœ‰Target T åæ ‡

$$(X,Y) = (\frac{x}{w}+x_m,\frac{y}{w}+y_m)$$

## ç‚¹åˆ°ç›´çº¿çš„è·ç¦»

> org.locationtech.jts.algorithm.distance

å¯¹äºç‚¹åˆ°ç›´çº¿çš„è·ç¦»ï¼Œæœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µ

![](https://static.yuhang.ch/blog/study-jts-or-maths_1_2.png)

å¯¹äºçº¿æ®µABï¼Œçº¿æ®µå¤–ä¸€ç‚¹Påˆ°çº¿æ®µçš„æœ€çŸ­è·ç¦»è·ç¦»d

ä»¤$$\angle PAB=\theta$$

è®¾å®šæ ‡å¿—æœ‰APåœ¨ABä¸Šçš„æŠ•å½±ä¸ABçš„é•¿åº¦ä¹‹æ¯”ä¸º

$$r=\frac{|AP|\cos \theta}{|AB|}=\frac{APÂ·AB}{|AP||AB|}Â·\frac{|AP|}{|AB|}=\frac{APÂ·AB}{|AB|^2}$$

æœ‰

$$r\leqslant0,d=PA$$

$$r\geqslant1,d=PB$$

$$0< r<1,d=PL (PL\bot AB)$$

å¯¹äºç¬¬ä¸‰ç§æƒ…å½¢ï¼Œæœ‰

$$|PL|=|AP|Â·\sin \theta=|AP|Â·\frac {AP\times AB}{|AP||AB|}=\frac{AP\times AB}{|AB|}$$

## 

## å†™åˆ°æœ€å

å‘ç°ä¸€ç¯‡ä¸€ç¯‡çš„å½¢å¼ä¸åˆ©äºå½’ç±»å’Œç³»ç»Ÿæ€§çš„è®°å½•ï¼Œé‚å°†å…¶æ‰˜ç®¡åœ¨[githu b-docsify](https://yuhangch.github.io/gots/)ä¸Šã€‚